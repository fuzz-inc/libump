/***********************************************************************//**
	@file
***************************************************************************/
#include "ump/thread/Thread.hpp"

namespace ump {
namespace thread {
/***********************************************************************//**
	@brief コンストラクタ
***************************************************************************/
Thread::Thread(std::thread* thread) {
  startThread(thread);
}
/***********************************************************************//**
	@brief デストラクタ
***************************************************************************/
Thread::~Thread() {
  stopThread();
}
/***********************************************************************//**
	@brief 
***************************************************************************/
bool Thread::sleep(int ms) {
  return cond_.wait(ms);
}
/***********************************************************************//**
	@brief 
***************************************************************************/
void Thread::sleep() {
  cond_.wait();
}
/***********************************************************************//**
	@brief 
***************************************************************************/
void Thread::SetThreadName(const char* name) {
#if defined(UMP_PLATFORM_MAC)
  pthread_setname_np(name);
#endif
}
/***********************************************************************//**
	@brief 
***************************************************************************/
void Thread::startThread(std::thread* thread) {
  stopThread();
  thread_.reset(thread);
}
/***********************************************************************//**
	@brief 
***************************************************************************/
void Thread::stopThread() {
  if(thread_) {
    cond_.notify();
    thread_->join();
    cond_.reset();
    thread_.reset();
  }
}
/***********************************************************************//**
	$Id$
***************************************************************************/
}
}
