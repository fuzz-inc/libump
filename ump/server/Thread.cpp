/***********************************************************************//**
	@file
***************************************************************************/
#include "ump/server/Server.hpp"
#include "ump/server/Thread.hpp"

namespace ump {
namespace server {
/***********************************************************************//**
	@brief コンストラクタ
	@param[in] server サーバー
***************************************************************************/
Thread::Thread(std::shared_ptr<Server> server)
  : server_(server)
{
}
/***********************************************************************//**
	@brief デストラクタ
***************************************************************************/
Thread::~Thread() {
  stop();
}
/***********************************************************************//**
	@brief スレッドを開始する
***************************************************************************/
void Thread::start() {
  assert(!thread_);
  thread_.reset(new std::thread([&]() { server_->start(); }));
}
/***********************************************************************//**
	@brief スレッドを停止する
***************************************************************************/
void Thread::stop() {
  server_->stop();
  if(thread_) {
    thread_->join();
    thread_.reset();
  }
}
/***********************************************************************//**
	$Id$
***************************************************************************/
}
}
